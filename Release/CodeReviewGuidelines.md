# äººç”ŸGit ä»£ç å®¡æŸ¥æŒ‡å—

## ğŸ“‹ ä»£ç å®¡æŸ¥æ£€æŸ¥æ¸…å•

### ğŸ—ï¸ æ¶æ„å’Œè®¾è®¡

#### MVVMæ¶æ„åˆè§„æ€§
- [ ] Viewå±‚åªåŒ…å«UIé€»è¾‘ï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
- [ ] ViewModelæ­£ç¡®ä½¿ç”¨@Publishedå±æ€§å‘å¸ƒçŠ¶æ€å˜åŒ–
- [ ] Modelå±‚æ•°æ®æ¨¡å‹å®šä¹‰æ¸…æ™°ï¼Œå…³ç³»æ­£ç¡®
- [ ] ä¾èµ–æ³¨å…¥æ­£ç¡®å®ç°ï¼Œé¿å…ç¡¬ç¼–ç ä¾èµ–

#### SwiftUIæœ€ä½³å®è·µ
- [ ] æ­£ç¡®ä½¿ç”¨@State, @StateObject, @ObservedObject, @EnvironmentObject
- [ ] Viewç»“æ„åˆç†ï¼Œé¿å…è¿‡æ·±åµŒå¥—
- [ ] è‡ªå®šä¹‰Viewå¯å¤ç”¨æ€§è‰¯å¥½
- [ ] åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœæµç•…è‡ªç„¶

#### SwiftDataä½¿ç”¨è§„èŒƒ
- [ ] @Modelç±»æ­£ç¡®å®šä¹‰ï¼Œå±æ€§ç±»å‹åˆé€‚
- [ ] å…³ç³»æ˜ å°„æ­£ç¡® (@Relationship)
- [ ] æ•°æ®è¿ç§»ç­–ç•¥è€ƒè™‘å‘¨å…¨
- [ ] æŸ¥è¯¢æ“ä½œé«˜æ•ˆï¼Œé¿å…N+1é—®é¢˜

### ğŸ”’ å®‰å…¨æ€§æ£€æŸ¥

#### æ•°æ®å®‰å…¨
- [ ] æ•æ„Ÿæ•°æ®æ­£ç¡®åŠ å¯†å­˜å‚¨
- [ ] APIå¯†é’¥ä¸åœ¨ä»£ç ä¸­ç¡¬ç¼–ç 
- [ ] ç”¨æˆ·è¾“å…¥æ­£ç¡®éªŒè¯å’Œæ¸…ç†
- [ ] æœ¬åœ°æ•°æ®è®¿é—®æƒé™æ§åˆ¶

#### ç½‘ç»œå®‰å…¨
- [ ] HTTPSè¿æ¥å¼ºåˆ¶ä½¿ç”¨
- [ ] è¯ä¹¦éªŒè¯æ­£ç¡®å®ç°
- [ ] ç½‘ç»œè¯·æ±‚è¶…æ—¶è®¾ç½®åˆç†
- [ ] é”™è¯¯ä¿¡æ¯ä¸æ³„éœ²æ•æ„Ÿæ•°æ®

### ğŸš€ æ€§èƒ½ä¼˜åŒ–

#### å†…å­˜ç®¡ç†
- [ ] é¿å…å¾ªç¯å¼•ç”¨ï¼Œæ­£ç¡®ä½¿ç”¨weak/unowned
- [ ] å¤§å¯¹è±¡åŠæ—¶é‡Šæ”¾
- [ ] å›¾ç‰‡å’Œèµ„æºæ‡’åŠ è½½
- [ ] å†…å­˜è­¦å‘Šæ­£ç¡®å¤„ç†

#### å“åº”æ€§èƒ½
- [ ] ä¸»çº¿ç¨‹ä¸æ‰§è¡Œè€—æ—¶æ“ä½œ
- [ ] å¼‚æ­¥æ“ä½œæ­£ç¡®ä½¿ç”¨async/await
- [ ] UIæ›´æ–°åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ
- [ ] é•¿åˆ—è¡¨ä½¿ç”¨LazyVStack/LazyHStack

#### ç½‘ç»œæ€§èƒ½
- [ ] ç½‘ç»œè¯·æ±‚åˆå¹¶å’Œç¼“å­˜
- [ ] é‡è¯•æœºåˆ¶åˆç†å®ç°
- [ ] è¶…æ—¶è®¾ç½®é€‚å½“
- [ ] ç¦»çº¿æ¨¡å¼æ”¯æŒ

### ğŸ§ª æµ‹è¯•è¦†ç›–

#### å•å…ƒæµ‹è¯•
- [ ] ä¸šåŠ¡é€»è¾‘æ ¸å¿ƒæ–¹æ³•æœ‰æµ‹è¯•è¦†ç›–
- [ ] è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸æƒ…å†µæµ‹è¯•
- [ ] Mockå¯¹è±¡æ­£ç¡®ä½¿ç”¨
- [ ] æµ‹è¯•ç”¨ä¾‹å‘½åæ¸…æ™°

#### é›†æˆæµ‹è¯•
- [ ] æ•°æ®å±‚å’Œä¸šåŠ¡å±‚é›†æˆæµ‹è¯•
- [ ] AIæœåŠ¡é›†æˆæµ‹è¯•
- [ ] é”™è¯¯å¤„ç†é›†æˆæµ‹è¯•
- [ ] ç«¯åˆ°ç«¯æµç¨‹æµ‹è¯•

### ğŸ“± ç”¨æˆ·ä½“éªŒ

#### ç•Œé¢è®¾è®¡
- [ ] éµå¾ªAppleäººæœºç•Œé¢æŒ‡å¼•
- [ ] æ”¯æŒæ·±è‰²æ¨¡å¼
- [ ] åŠ¨æ€å­—ä½“æ”¯æŒ
- [ ] æ— éšœç¢åŠŸèƒ½æ”¯æŒ

#### äº¤äº’ä½“éªŒ
- [ ] åŠ è½½çŠ¶æ€æ¸…æ™°æ˜¾ç¤º
- [ ] é”™è¯¯ä¿¡æ¯ç”¨æˆ·å‹å¥½
- [ ] æ“ä½œåé¦ˆåŠæ—¶
- [ ] æ‰‹åŠ¿æ“ä½œç›´è§‚

#### å›½é™…åŒ–
- [ ] æ–‡æœ¬å­—ç¬¦ä¸²å¯æœ¬åœ°åŒ–
- [ ] æ—¥æœŸå’Œæ•°å­—æ ¼å¼æœ¬åœ°åŒ–
- [ ] å¸ƒå±€é€‚åº”ä¸åŒè¯­è¨€
- [ ] æ–‡åŒ–å·®å¼‚è€ƒè™‘

### ğŸ”§ ä»£ç è´¨é‡

#### ä»£ç é£æ ¼
- [ ] éµå¾ªSwiftç¼–ç è§„èŒƒ
- [ ] å‘½åæ¸…æ™°æœ‰æ„ä¹‰
- [ ] æ³¨é‡Šå……åˆ†ä¸”å‡†ç¡®
- [ ] ä»£ç æ ¼å¼ä¸€è‡´

#### ä»£ç ç»“æ„
- [ ] å‡½æ•°é•¿åº¦åˆç† (< 50è¡Œ)
- [ ] ç±»å’Œç»“æ„ä½“èŒè´£å•ä¸€
- [ ] é¿å…é‡å¤ä»£ç 
- [ ] ä¾èµ–å…³ç³»æ¸…æ™°

#### é”™è¯¯å¤„ç†
- [ ] å¼‚å¸¸æƒ…å†µå…¨é¢è€ƒè™‘
- [ ] é”™è¯¯ä¿¡æ¯è¯¦ç»†å‡†ç¡®
- [ ] æ¢å¤æœºåˆ¶åˆç†
- [ ] æ—¥å¿—è®°å½•å®Œæ•´

## ğŸ” å…·ä½“æ£€æŸ¥é¡¹ç›®

### AIæœåŠ¡é›†æˆ
```swift
// âœ… æ­£ç¡®çš„AIæœåŠ¡è°ƒç”¨
class TaskPlanService {
    private let client: DeepseekR1Client
    private let errorHandler: AIServiceErrorHandler
    
    func generateTaskPlan(for branch: Branch) async throws -> TaskPlan {
        do {
            let response = try await client.generateCompletion(prompt: buildPrompt(for: branch))
            return try parseTaskPlan(from: response, branchId: branch.id)
        } catch {
            await errorHandler.handleError(error, context: "TaskPlanService.generateTaskPlan")
            throw error
        }
    }
}

// âŒ é”™è¯¯çš„å®ç°
class BadTaskPlanService {
    func generateTaskPlan(for branch: Branch) -> TaskPlan {
        // åŒæ­¥è°ƒç”¨å¼‚æ­¥API - é”™è¯¯
        let response = try! client.generateCompletion(prompt: "...")
        return TaskPlan(...)
    }
}
```

### SwiftDataæ¨¡å‹å®šä¹‰
```swift
// âœ… æ­£ç¡®çš„æ¨¡å‹å®šä¹‰
@Model
class Branch {
    @Attribute(.unique) var id: UUID
    var name: String
    var description: String
    var status: BranchStatus
    var createdAt: Date
    var progress: Double
    
    @Relationship(deleteRule: .cascade) var commits: [Commit]
    @Relationship(deleteRule: .cascade) var taskPlan: TaskPlan?
    @Relationship(inverse: \User.branches) var user: User?
    
    init(name: String, description: String) {
        self.id = UUID()
        self.name = name
        self.description = description
        self.status = .active
        self.createdAt = Date()
        self.progress = 0.0
    }
}

// âŒ é”™è¯¯çš„å®ç°
@Model
class BadBranch {
    var id: String = UUID().uuidString // åº”è¯¥ä½¿ç”¨UUIDç±»å‹
    var name: String = "" // åº”è¯¥åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®
    var commits: [Commit] = [] // ç¼ºå°‘@Relationshipæ³¨è§£
}
```

### é”™è¯¯å¤„ç†
```swift
// âœ… æ­£ç¡®çš„é”™è¯¯å¤„ç†
func createBranch(name: String, description: String) async throws -> Branch {
    guard !name.isEmpty else {
        throw ValidationError.emptyName
    }
    
    guard name.count <= 100 else {
        throw ValidationError.nameTooLong
    }
    
    do {
        let branch = Branch(name: name, description: description)
        let taskPlan = try await taskPlanService.generateTaskPlan(for: branch)
        branch.taskPlan = taskPlan
        
        try await repository.save(branch)
        return branch
    } catch let error as AIServiceError {
        // AIæœåŠ¡é”™è¯¯ï¼Œæä¾›é™çº§æ–¹æ¡ˆ
        let branch = Branch(name: name, description: description)
        branch.taskPlan = createManualTaskPlan(for: branch)
        try await repository.save(branch)
        return branch
    } catch {
        throw BranchCreationError.saveFailed(error)
    }
}

// âŒ é”™è¯¯çš„å®ç°
func badCreateBranch(name: String, description: String) -> Branch {
    let branch = Branch(name: name, description: description)
    try! repository.save(branch) // å¼ºåˆ¶è§£åŒ… - å±é™©
    return branch
}
```

### UIçŠ¶æ€ç®¡ç†
```swift
// âœ… æ­£ç¡®çš„çŠ¶æ€ç®¡ç†
@MainActor
class BranchManager: ObservableObject {
    @Published var branches: [Branch] = []
    @Published var isLoading = false
    @Published var error: Error?
    
    func loadBranches() async {
        isLoading = true
        error = nil
        
        do {
            branches = try await repository.findAll()
        } catch {
            self.error = error
        }
        
        isLoading = false
    }
}

// âŒ é”™è¯¯çš„å®ç°
class BadBranchManager: ObservableObject {
    @Published var branches: [Branch] = []
    
    func loadBranches() {
        // åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œè€—æ—¶æ“ä½œ - é”™è¯¯
        branches = try! repository.findAll()
    }
}
```

## ğŸ“Š ä»£ç è´¨é‡æŒ‡æ ‡

### å¤æ‚åº¦æŒ‡æ ‡
- åœˆå¤æ‚åº¦ < 10
- å‡½æ•°é•¿åº¦ < 50è¡Œ
- ç±»é•¿åº¦ < 500è¡Œ
- åµŒå¥—æ·±åº¦ < 4å±‚

### æµ‹è¯•æŒ‡æ ‡
- å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- é›†æˆæµ‹è¯•è¦†ç›–ç‡ > 60%
- å…³é”®è·¯å¾„æµ‹è¯•è¦†ç›–ç‡ = 100%

### æ€§èƒ½æŒ‡æ ‡
- åº”ç”¨å¯åŠ¨æ—¶é—´ < 2ç§’
- UIå“åº”æ—¶é—´ < 1ç§’
- å†…å­˜ä½¿ç”¨ < 100MB
- ç½‘ç»œè¯·æ±‚è¶…æ—¶ < 30ç§’

## ğŸš¨ å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### å†…å­˜æ³„æ¼
```swift
// âŒ å¾ªç¯å¼•ç”¨
class ViewController {
    var completion: (() -> Void)?
    
    func setupCompletion() {
        completion = {
            self.doSomething() // å¼ºå¼•ç”¨self
        }
    }
}

// âœ… æ­£ç¡®å¤„ç†
class ViewController {
    var completion: (() -> Void)?
    
    func setupCompletion() {
        completion = { [weak self] in
            self?.doSomething()
        }
    }
}
```

### çº¿ç¨‹å®‰å…¨
```swift
// âŒ çº¿ç¨‹ä¸å®‰å…¨
class DataManager {
    private var cache: [String: Any] = [:]
    
    func setValue(_ value: Any, forKey key: String) {
        cache[key] = value // å¤šçº¿ç¨‹è®¿é—®ä¸å®‰å…¨
    }
}

// âœ… çº¿ç¨‹å®‰å…¨
actor DataManager {
    private var cache: [String: Any] = [:]
    
    func setValue(_ value: Any, forKey key: String) {
        cache[key] = value // Actorä¿è¯çº¿ç¨‹å®‰å…¨
    }
}
```

### ç½‘ç»œé”™è¯¯å¤„ç†
```swift
// âŒ ç®€å•ç²—æš´
func fetchData() async throws -> Data {
    return try await URLSession.shared.data(from: url).0
}

// âœ… å®Œå–„çš„é”™è¯¯å¤„ç†
func fetchData() async throws -> Data {
    do {
        let (data, response) = try await URLSession.shared.data(from: url)
        
        guard let httpResponse = response as? HTTPURLResponse else {
            throw NetworkError.invalidResponse
        }
        
        guard 200...299 ~= httpResponse.statusCode else {
            throw NetworkError.httpError(httpResponse.statusCode)
        }
        
        return data
    } catch {
        if error is URLError {
            throw NetworkError.connectionFailed
        }
        throw error
    }
}
```

## âœ… å®¡æŸ¥é€šè¿‡æ ‡å‡†

### å¿…é¡»æ»¡è¶³çš„æ¡ä»¶
- [ ] æ‰€æœ‰ç¼–è¯‘è­¦å‘Šå·²è§£å†³
- [ ] æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] ä»£ç è¦†ç›–ç‡è¾¾æ ‡
- [ ] æ€§èƒ½æŒ‡æ ‡æ»¡è¶³è¦æ±‚
- [ ] å®‰å…¨æ£€æŸ¥é€šè¿‡
- [ ] ç”¨æˆ·ä½“éªŒæµ‹è¯•é€šè¿‡

### å®¡æŸ¥ç­¾å­—
- **ä»£ç å®¡æŸ¥å‘˜**: _________________ æ—¥æœŸ: _________
- **æŠ€æœ¯è´Ÿè´£äºº**: _________________ æ—¥æœŸ: _________
- **æ¶æ„å¸ˆ**: _________________ æ—¥æœŸ: _________

## ğŸ“š å‚è€ƒèµ„æº

### Appleå®˜æ–¹æ–‡æ¡£
- [Swift API Design Guidelines](https://swift.org/documentation/api-design-guidelines/)
- [Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines/)
- [SwiftUI Documentation](https://developer.apple.com/documentation/swiftui/)
- [SwiftData Documentation](https://developer.apple.com/documentation/swiftdata/)

### æœ€ä½³å®è·µ
- [iOS App Security Best Practices](https://developer.apple.com/documentation/security/)
- [Performance Best Practices](https://developer.apple.com/documentation/xcode/improving-your-app-s-performance/)
- [Testing Best Practices](https://developer.apple.com/documentation/xctest/)